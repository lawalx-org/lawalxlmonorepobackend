// model ChartTable {
//   id        String    @id @default(uuid())
//   title     String
//   status    ChartStatus
//   category  ChartName
//   xAxis    Json
//   yAxis    Json
//   zAxis    Json?
//   createdAt DateTime  @default(now())
//   updatedAt DateTime  @updatedAt

//   sheet     Sheet?
// }

model ChartTable {
  id        String      @id @default(uuid())
  title     String
  status    ChartStatus @default(INACTIVE) 
  category  ChartName
  xAxis     Json
  yAxis     Json?
  zAxis     Json?
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt

  // Relation to Sheet (one-to-one optional)
  sheet   Sheet?  @relation("ChartToSheet", fields: [sheetId], references: [id])
  sheetId String? @unique

  // Relation to barChart (one-to-one optional)
  barChart           barChart?
  horizontalBarChart HorizontalBarChart?
  pi                 Pi?
  heatmap            HeatMapChart?
  areaChart          AreaChart?
  multiAxisChart     MultiAxisChart?
  columnChart        ColumnChart?
  stackedBarChart    StackedBarChart?
  doughnutChart      DoughnutChart?
  paretoChart        ParetoChart?
  histogramChart     HistogramChart?
  scatterChart       ScatterChart?
  solidGaugeChart    SolidGaugeChart?
  funnelChart        FunnelChart?
  waterFallChart     WaterFallChart?
  candlestickChart   CandlestickChart?
  radarChart         RadarChart?
  

  // SABBIR - Relation to chart (one-to-one optional) //
  // Program         Program?         @relation(fields: [programId], references: [id])
  // programId       String?
  // SABBIR // 

  //ray
  Project         Project?         @relation(fields: [projectId], references: [id])
  projectId       String?
  //ray
  
}

enum ChartStatus {
  ACTIVE
  INACTIVE
  DEPRECATED
  COMPLETED
}

enum ChartName {
  BAR
  LINE
  PIE
  DOUGHNUT
  RADAR
  POLAR_AREA
  BUBBLE
  SCATTER
  AREA
  MIXED
  GAUGE
  FUNNEL
  TREEMAP
  SUNBURST
  SANKEY
  TABLE
  HEATMAP
  HORIZONTAL_BAR
  STACK_BAR_HORIZONTAL
  COLUMN
  PARETO
  HISTOGRAM
  WATERFALL
  CANDLESTICK
  GEOGRAPHY_GRAPH
  SPLINE
}

//barChart
model barChart {
  id                String   @id @default(uuid())
  numberOfDataset   Int
  firstFiledDataset Int
  lastFiledDAtaset  Int
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  //relations

  chartTable                 ChartTable                  @relation(fields: [ChartTableId], references: [id])
  ChartTableId               String                      @unique
  widgets                Widget[]
}

// HORIZONTAL_BAR chart 
model HorizontalBarChart {
  id                String   @id @default(uuid())
  numberOfDataset   Int
  firstFieldDataset Int
  lastFieldDataset  Int
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  // One-to-one with ChartTable
  chartTable   ChartTable                @relation(fields: [chartTableId], references: [id])
  chartTableId String                    @unique
  widgets      Widget[]
}

//pi chart 
model Pi {
  id                String         @id @default(uuid())
  numberOfDataset   Int
  firstFieldDataset Int?
  lastFieldDataset  Int?
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
  widgets           Widget[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}

//Heatmap
model HeatMapChart {
  id                String              @id @default(uuid())
  numberOfDataset   Int
  firstFieldDataset Int
  lastFieldDataset  Int
  widgets           Widget[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}

// Area
model AreaChart {
  id                String           @id @default(uuid())
  numberOfDataset   Int
  firstFieldDataset Int
  lastFieldDataset  Int
  widgets           Widget[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}

// multi Axis
model MultiAxisChart {
  id                String           @id @default(uuid())
  numberOfDataset   Int
  firstFieldDataset Int
  lastFieldDataset  Int
  widgets           Widget[]

  //relation 
  chartTable          ChartTable            @relation(fields: [chartTableId], references: [id])
  chartTableId        String                @unique

}

//Column
model ColumnChart {
  id                String             @id @default(uuid())
  numberOfDataset   Int
  firstFieldDataset Int
  lastFieldDataset  Int
  widgets           Widget[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}

//stacked_bar_chart
model StackedBarChart {
  id                String   @id @default(uuid())
  numberOfDataset   Int
  firstFiledDataset Int
  lastFiledDAtaset  Int
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  //relations

  chartTable   ChartTable                  @relation(fields: [ChartTableId], references: [id])
  ChartTableId String                      @unique
  showWidgets  Widget[]
}

//pi chart 
model DoughnutChart {
  id                String               @id @default(uuid())
  numberOfDataset   Int
  firstFieldDataset Int
  lastFieldDataset  Int
  createdAt         DateTime             @default(now())
  updatedAt         DateTime             @updatedAt
  widgets           Widget[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}

//pareto  chart
model ParetoChart {
  id                      String                  @id @default(uuid())
  numberOfDataset         Int
  Left_firstFieldDataset  Int
  Left_lastFieldDataset   Int
  Right_firstFieldDataset Int
  Right_lastFieldDataset  Int
  createdAt               DateTime                @default(now())
  updatedAt               DateTime                @updatedAt
  widgets                 Widget[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}

//Histogram
model HistogramChart {
  id                      String                  @id @default(uuid())
  numberOfDataset         Int
  firstFieldDataset       Int
  lastFieldDataset        Int
  createdAt               DateTime                @default(now())
  updatedAt               DateTime                @updatedAt
  widgets                 Widget[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}

//Scatter
model ScatterChart {
  id                      String                  @id @default(uuid())
  numberOfDataset         Int
  firstFieldDataset       Int
  lastFieldDataset        Int
  createdAt               DateTime                @default(now())
  updatedAt               DateTime                @updatedAt
  widgets                 Widget[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}

//Scatter
model SolidGaugeChart {
  id                      String                  @id @default(uuid())
  startingRange           Int
  endRange                Int
  gaugeValue              Int
  lastFieldDataset        Int
  chartHight              Int
  startAngle              Int
  endAngle                Int
  trackColor              String
  strokeWidth             Int
  valueFontSize           Int
  shadeIntensity          Int
  createdAt               DateTime                @default(now())
  updatedAt               DateTime                @updatedAt
  widgets                 Widget[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}

//Funnel
model FunnelChart {
  id                      String                  @id @default(uuid())
  numberOfDataset         Int
  firstFieldDataset       Int
  lastFieldDataset        Int
  createdAt               DateTime                @default(now())
  updatedAt               DateTime                @updatedAt
  widgets                 Widget[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}

//WaterFall 
model WaterFallChart {
  id                      String                  @id @default(uuid())
  numberOfDataset         Int
  firstFieldDataset       Int
  lastFieldDataset        Int
  createdAt               DateTime                @default(now())
  updatedAt               DateTime                @updatedAt
  widgets                 Widget[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}

//Candlestick 
model CandlestickChart {
  id                      String                  @id @default(uuid())
  numberOfDataset         Int
  firstFieldDataset       Int
  lastFieldDataset        Int
  createdAt               DateTime                @default(now())
  updatedAt               DateTime                @updatedAt
  widgets                 Widget[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}

//Radar 
model RadarChart {
  id                      String                  @id @default(uuid())
  numberOfDataset         Int
  firstFieldDataset       Int
  lastFieldDataset        Int
  createdAt               DateTime                @default(now())
  updatedAt               DateTime                @updatedAt
  widgets                 Widget[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}


model Widget {
  id          String    @id @default(uuid())
  legendName  String
  color       String
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  // Relations to all chart types (only one will be non-null per widget)
  barChart           barChart?           @relation(fields: [barChartId], references: [id])
  barChartId         String?

  horizontalBarChart HorizontalBarChart? @relation(fields: [horizontalBarChartId], references: [id])
  horizontalBarChartId String?

  piChart            Pi?                 @relation(fields: [piChartId], references: [id])
  piChartId          String?

  heatmapChart       HeatMapChart?       @relation(fields: [heatMapChartId], references: [id])
  heatMapChartId     String?

  areaChart          AreaChart?          @relation(fields: [areaChartId], references: [id])
  areaChartId        String?

  multiAxisChart     MultiAxisChart?     @relation(fields: [multiAxisChartId], references: [id])
  multiAxisChartId   String?

  columnChart        ColumnChart?        @relation(fields: [columnChartId], references: [id])
  columnChartId      String?

  stackedBarChart    StackedBarChart?    @relation(fields: [stackedBarChartId], references: [id])
  stackedBarChartId  String?

  doughnutChart      DoughnutChart?      @relation(fields: [doughnutChartId], references: [id])
  doughnutChartId    String?

  paretoChart        ParetoChart?        @relation(fields: [paretoChartId], references: [id])
  paretoChartId      String?

  histogramChart     HistogramChart?     @relation(fields: [histogramChartId], references: [id])
  histogramChartId   String?

  scatterChart       ScatterChart?       @relation(fields: [scatterChartId], references: [id])
  scatterChartId     String?

  solidGaugeChart    SolidGaugeChart?    @relation(fields: [solidGaugeChartId], references: [id])
  solidGaugeChartId  String?

  funnelChart        FunnelChart?        @relation(fields: [funnelChartId], references: [id])
  funnelChartId      String?

  waterFallChart     WaterFallChart?     @relation(fields: [waterFallChartId], references: [id])
  waterFallChartId   String?

  candlestickChart   CandlestickChart?   @relation(fields: [candlestickChartId], references: [id])
  candlestickChartId String?

  radarChart         RadarChart?         @relation(fields: [radarChartId], references: [id])
  radarChartId       String?
}
