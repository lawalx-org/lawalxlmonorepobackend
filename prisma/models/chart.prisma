// model ChartTable {
//   id        String    @id @default(uuid())
//   title     String
//   status    ChartStatus
//   category  ChartName
//   xAxis    Json
//   yAxis    Json
//   zAxis    Json?
//   createdAt DateTime  @default(now())
//   updatedAt DateTime  @updatedAt

//   sheet     Sheet?
// }

model ChartTable {
  id        String      @id @default(uuid())
  title     String
  status    ChartStatus
  category  ChartName
  xAxis     Json
  yAxis     Json?
  zAxis     Json?
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt

  // Relation to Sheet (one-to-one optional)
  sheet   Sheet?  @relation("ChartToSheet", fields: [sheetId], references: [id])
  sheetId String? @unique

  // Relation to barChart (one-to-one optional)
  barChart           barChart?
  horizontalBarChart HorizontalBarChart?
  pi                 Pi?
  heatmap            HeatMapChart?
}

enum ChartStatus {
  ACTIVE
  INACTIVE
  DEPRECATED
  COMPLETED
}

enum ChartName {
  BAR
  LINE
  PIE
  DOUGHNUT
  RADAR
  POLAR_AREA
  BUBBLE
  SCATTER
  AREA
  MIXED
  GAUGE
  FUNNEL
  TREEMAP
  SUNBURST
  SANKEY
  TABLE
  HEATMAP
  HORIZONTAL_BAR
  STACK_BAR_HORIZONTAL
  COLUMN
  PARETO
  HISTOGRAM
  WATERFALL
  CANDLESTICK
  GEOGRAPHY_GRAPH
  SPLINE
}

//barChart
model barChart {
  id                String   @id @default(uuid())
  numberOfDataset   Int
  firstFiledDataset Int
  lastFiledDAtaset  Int
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  //relations

  chartTable   ChartTable   @relation(fields: [ChartTableId], references: [id])
  ChartTableId String       @unique
  showWidgets  ShowWidget[]
}

model ShowWidget {
  id          Int      @id @default(autoincrement())
  legend_name String
  color       String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  //relations
  barChart   barChart @relation(fields: [barChartId], references: [id])
  barChartId String
}

// HORIZONTAL_BAR chart 
model HorizontalBarChart {
  id                String   @id @default(uuid())
  numberOfDataset   Int
  firstFieldDataset Int
  lastFieldDataset  Int
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  // One-to-one with ChartTable
  chartTable   ChartTable                @relation(fields: [chartTableId], references: [id])
  chartTableId String                    @unique
  widgets      ShowWidgetHorizontalBar[]
}

//hr-bar-chart-widget
model ShowWidgetHorizontalBar {
  id         Int      @id @default(autoincrement())
  legendName String
  color      String
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  horizontalBarChart   HorizontalBarChart @relation(fields: [horizontalBarChartId], references: [id])
  horizontalBarChartId String
}

//pi chart 
// pi chart
model Pi {
  id              String         @id @default(uuid())
  numberOfDataset Int
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  widgets         ShowWidgetPi[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}

model ShowWidgetPi {
  id         Int      @id @default(autoincrement())
  legendName String
  color      String
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  //relation
  piChart   Pi     @relation(fields: [piChartId], references: [id])
  piChartId String
}

model HeatMapChart {
  id                String @id @default(uuid())
  numberOfDataset_X Int
  numberOfDataset_Y Int
  firstFieldDataset Int
  lastFieldDataset  Int

  widgets ShowWidgetHeatMap[]

  //relation 
  chartTable   ChartTable @relation(fields: [chartTableId], references: [id])
  chartTableId String     @unique
}

model ShowWidgetHeatMap {
  id         Int    @id @default(autoincrement())
  legendName String

  //relation
  heatmap   HeatMapChart @relation(fields: [heatmapId], references: [id])
  heatmapId String
}
