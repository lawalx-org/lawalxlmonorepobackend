model   Project {

  //mandatory
  id               String @id @default(uuid())
  name             String
  shareWith        Share    @default(Only_Me)

  dateDate               DateTime?     @default(now())
  programId              String
  managerId              String
  manager Manager @relation(fields: [managerId], references: [id], onDelete: Cascade)
  program Program  @relation(fields: [programId], references: [id], onDelete: Cascade)
  projectEmployees   ProjectEmployee[]
  projectViewers     ProjectViewer[]
  progress               Int? 


//if need data
  slug             String?              @unique
  computedProgress Float                @default(0)
  status                 ProjectStatus @default(PENDING)
  priority               Priority      @default(MEDIUM)
  metadata         Json?                @default("{}")
  nodeType         String?
  projectCompleteDate DateTime?



  //optional
  description            String?
  sortName               String? 
  currentRate            String?
  startDate              DateTime?
  SelectDays             Days[]
  UploadData             UploadDate?
  selectDate             DateTime[]
  location               String?
  deadline               DateTime?
  budget                 String?
  workingDay         Days[]

  chartList              String[] 
  createdAt              DateTime      @default(now())
  updatedAt              DateTime      @updatedAt
  isDeleted              Boolean       @default(false)
  deletedAt              DateTime?


  // Relations
   // template
  templateId         String?   @map("template_id")
  template           Template? @relation(fields: [templateId], references: [id])


  nodes                      InfrastructureNode[]
  tasks                      Task[]
  activities                 Activity[]
  reviews                    Review[]
  requestsToAddProjectMember RequestToAddProjectMember[]
  submitted                  Submitted[]
  reminders                  Reminder[]
  sheets                     Sheet[]
  favorites                  FavoriteProject[]

  //ray
    charts   ChartTable[]
    // ray

  @@index([programId])
  @@index([slug])
  @@index([managerId])
  @@index([status])
  @@index([priority])
  @@index([deadline])
  @@index([createdAt])
  @@index([updatedAt])
  @@map("projects")
}

model ProjectEmployee {
  id         String   @id @default(uuid())
  projectId  String
  employeeId String
  assignedAt DateTime @default(now())

  // Relations
  project  Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  employee Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)

  @@unique([projectId, employeeId])
  @@map("project_employees")
}

model ProjectViewer {
  id         String   @id @default(uuid())
  projectId  String
  viewerId   String
  assignedAt DateTime @default(now())

  project Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
  viewer  Viewer  @relation(fields: [viewerId], references: [id], onDelete: Cascade)

  @@unique([projectId, viewerId])
  @@map("project_viewers")
}

enum Share {
  Only_Me
  Invite_Staff
}

enum UploadCycle {
  Daily
  Weekly
  By_Weekly
  Monthly
}

enum Days {
  Sun
  Mon
  Tue
  Wed 
  Thurs
  Fri
  Sat 
}

enum UploadDate {
  Three
  Four
  Five
}




// model project {

//   //must need 
//    id           String   @id @default(uuid())
//    name         String
//    DateDate     DateTime
//    UpdateCycle  UploadCycle
//    ShareWith    Share
//    UploadData   UploadDate
//    status                 ProjectStatus @default(PENDING)
//    projectSetting   Boolean  @default(false)   // here can set then project


//    //optional fields
//    SelectDays   Days[]?
//    SelectDate    String[]?
//    Staffs        String []?


//    //Seeating Enable
//    description    String?
//    startDate      DateDate?
//    estimatedCompletedDate DateDate?
//    projectCompleteDate  DateDate?
//    ProjectLocation    String?
//    manager            String?
//    priority           Priority?  @default(MEDIUM)
//    Budget             Int?
//    currentRate        String?
//    workingDay         Days[]?





// }


// enum UploadCycle {
//   Daily
//   Weekly
//   By_Weekly
//   Monthly
// }

// enum Share {
//   Only_Me
//   Invite_Staff
//   Template_Settings
// }

// enum UploadDate {
//   Three
//   Four
//   Five
// }

// enum Days {
//   Sun
//   Mon
//   Tue
//   Wed 
//   Thurs
//   Fri
//   Sat 
// }



/// privious 
// model   Project {
//   id        String @id @default(uuid())
//   programId String
//   name      String

//   // sabbir infrastructure start from here...
//   slug             String?              @unique
//   computedProgress Float                @default(0)
//   nodes            InfrastructureNode[]
//   metadata         Json?                @default("{}")
//   nodeType         String?
//   // sabbir infrastructure end from here...

//   // uploadbeforeday           String
//   // uploadCycle               ProjectCycle
//   description            String
//   // dataReceivedTime          String?
//   // beforeSubmitData          Int?
//   // weakuploadData            String[]
//   // monthlyuploadData         String[]
//   status                 ProjectStatus @default(PENDING)
//   priority               Priority
//   deadline               DateTime
//   managerId              String?
//   startDate              DateTime?
//   progress               Int? // mendetory
//   chartList              String[] // Seed create that chart list
//   estimatedCompletedDate DateTime?
//   projectCompleteDate    DateTime? // this is project end date 
//   currentRate            String?
//   budget                 String?
//   createdAt              DateTime      @default(now())
//   updatedAt              DateTime      @updatedAt
//   latitude               Float?
//   longitude              Float?
//   isDeleted              Boolean       @default(false)
//   deletedAt              DateTime?

//   // Relations
//   program Program  @relation(fields: [programId], references: [id], onDelete: Cascade)
//   manager Manager? @relation(fields: [managerId], references: [id], onDelete: Cascade)
//    // template
//   templateId         String?   @map("template_id")
//   template           Template? @relation(fields: [templateId], references: [id])


//   projectEmployees           ProjectEmployee[]
//   projectViewers             ProjectViewer[]
//   tasks                      Task[]
//   activities                 Activity[]
//   reviews                    Review[]
//   requestsToAddProjectMember RequestToAddProjectMember[]
//   submitted                  Submitted[]
//   reminders                  Reminder[]
//   sheets                     Sheet[]
//   favorites                  FavoriteProject[]

//   //ray
//     charts   ChartTable[]
//     // ray

//   @@index([programId])
//   @@index([slug])
//   @@index([managerId])
//   @@index([status])
//   @@index([priority])
//   @@index([deadline])
//   @@index([estimatedCompletedDate])
//   @@index([projectCompleteDate])
//   @@index([createdAt])
//   @@index([updatedAt])
//   @@map("projects")
// }

// model ProjectEmployee {
//   id         String   @id @default(uuid())
//   projectId  String
//   employeeId String
//   assignedAt DateTime @default(now())

//   // Relations
//   project  Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
//   employee Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)

//   @@unique([projectId, employeeId])
//   @@map("project_employees")
// }

// model ProjectViewer {
//   id         String   @id @default(uuid())
//   projectId  String
//   viewerId   String
//   assignedAt DateTime @default(now())

//   project Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
//   viewer  Viewer  @relation(fields: [viewerId], references: [id], onDelete: Cascade)

//   @@unique([projectId, viewerId])
//   @@map("project_viewers")
// }
