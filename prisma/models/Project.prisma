model   Project {
  id        String @id @default(uuid())
  programId String
  name      String

  // sabbir infrastructure start from here...
  slug             String?              @unique
  computedProgress Float                @default(0)
  nodes            InfrastructureNode[]
  metadata         Json?                @default("{}")
  nodeType         String?
  // sabbir infrastructure end from here...

  // uploadbeforeday           String
  // uploadCycle               ProjectCycle
  description            String
  // dataReceivedTime          String?
  // beforeSubmitData          Int?
  // weakuploadData            String[]
  // monthlyuploadData         String[]
  status                 ProjectStatus @default(PENDING)
  priority               Priority
  deadline               DateTime
  managerId              String?
  startDate              DateTime?
  progress               Int? // mendetory
  chartList              String[] // Seed create that chart list
  estimatedCompletedDate DateTime?
  projectCompleteDate    DateTime? // this is project end date 
  currentRate            String?
  budget                 String?
  createdAt              DateTime      @default(now())
  updatedAt              DateTime      @updatedAt
  latitude               Float?
  longitude              Float?
  isDeleted              Boolean       @default(false)
  deletedAt              DateTime?

  // Relations
  program Program  @relation(fields: [programId], references: [id], onDelete: Cascade)
  manager Manager? @relation(fields: [managerId], references: [id], onDelete: Cascade)

  projectEmployees           ProjectEmployee[]
  projectViewers             ProjectViewer[]
  tasks                      Task[]
  activities                 Activity[]
  reviews                    Review[]
  requestsToAddProjectMember RequestToAddProjectMember[]
  submitted                  Submitted[]
  reminders                  Reminder[]
  sheets                     Sheet[]
  favorites                  FavoriteProject[]

  //ray
    charts   ChartTable[]
    // ray

  @@index([programId])
  @@index([slug])
  @@index([managerId])
  @@index([status])
  @@index([priority])
  @@index([deadline])
  @@index([estimatedCompletedDate])
  @@index([projectCompleteDate])
  @@index([createdAt])
  @@index([updatedAt])
  @@map("projects")
}

model ProjectEmployee {
  id         String   @id @default(uuid())
  projectId  String
  employeeId String
  assignedAt DateTime @default(now())

  // Relations
  project  Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  employee Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)

  @@unique([projectId, employeeId])
  @@map("project_employees")
}

model ProjectViewer {
  id         String   @id @default(uuid())
  projectId  String
  viewerId   String
  assignedAt DateTime @default(now())

  project Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
  viewer  Viewer  @relation(fields: [viewerId], references: [id], onDelete: Cascade)

  @@unique([projectId, viewerId])
  @@map("project_viewers")
}
